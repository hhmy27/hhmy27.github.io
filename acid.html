<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>ACID和实现原理</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, Python, Django"/><meta name="description" content="事务的 ACID 特性是如何实现的"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="ACID和实现原理"/><meta property="og:description" content="事务的 ACID 特性是如何实现的"/><meta property="og:url" content="https://hhmy27.github.io/"/><meta property="og:image" content="https://og-image-craigary.vercel.app/ACID%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="事务的 ACID 特性是如何实现的"/><meta name="twitter:title" content="ACID和实现原理"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/ACID%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="hhmy"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d2e3d73b18ace6cc.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-4ebe365aff0c04b1.js" defer=""></script><script src="/_next/static/6EAXhntIy7bGpb96a_Em-/_buildManifest.js" defer=""></script><script src="/_next/static/6EAXhntIy7bGpb96a_Em-/_ssgManifest.js" defer=""></script><script src="/_next/static/6EAXhntIy7bGpb96a_Em-/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="hhmy 的博客" href="/"><div class="h-6"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="27" height="27" class="fill-current text-black dark:text-white"></rect><rect width="27" height="27" fill="url(#paint0_radial)"></rect><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#3399FF" stop-opacity="0.9"></stop><stop offset="1" stop-color="#E0E0E0" stop-opacity="0.3"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">ACID和实现原理</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">关于</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">搜索</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white"> <!-- -->ACID和实现原理</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="https://github.com/hhmy27" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="hhmy" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="hhmy" srcSet="https://gravatar.com/avatar/c8089598dc27a7944c95a8ed30867b78?imwidth=32 1x, https://gravatar.com/avatar/c8089598dc27a7944c95a8ed30867b78?imwidth=48 2x" src="https://gravatar.com/avatar/c8089598dc27a7944c95a8ed30867b78?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">hhmy</p></a><span class="block"> / </span></div><div class="mr-2 mb-4 md:ml-0">2022 年 11 月 17 日</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">数据库</p></a></div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-block-0001a0d655494fc5955f57c356d6e87e"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">Nov 17, 2022</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">acid</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-gray">数据库</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">事务的 ACID 特性是如何实现的</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><div class="notion-table-of-contents notion-gray notion-block-2b54ec181e9c4251a7eb42fc2f33f6dd"><a href="#0a3701f73e774e11bfbea6467672c4a0" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">简介</span></a><a href="#8bb9947063ec4eaaa06d00a86995c5b8" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">基础概念</span></a><a href="#beb19c4de38e47ee92e228d2204ed5a7" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">原子性</span></a><a href="#99fb1eb54ec7464b8358fd2c6c1f5044" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">实现原理 undo log</span></a><a href="#ba89199e7b6c440494e509b1c9a666d8" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">持久性</span></a><a href="#81c7c0b03acd46888a7fc1635e0bd82c" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">实现原理 redo log</span></a><a href="#acd626ba84dc4af695a0e247775e5507" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">隔离性</span></a><a href="#b1fe6ae1d6cb4b659c7dade714a13bcd" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">隔离不足出现的问题</span></a><a href="#f1fc417bb3824444892a0446e63a543d" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">事务隔离级别</span></a><a href="#57ccb5cf1912402ba46ead3010e6b74c" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">RR隔离级别如何解决不可重复读和幻读</span></a><a href="#108c2302a9874e8baffd93e1122db6c6" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">一致性</span></a><a href="#a20114a9979348dfb541b7520d745fd9" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:24px">如何实现一致性</span></a><a href="#8610896280b9410f8eadba5a322840c8" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">总结</span></a><a href="#24a4fee48068441b86e14a944b371fc1" class="notion-table-of-contents-item"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Ref</span></a></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-0a3701f73e774e11bfbea6467672c4a0" data-id="0a3701f73e774e11bfbea6467672c4a0"><span><div id="0a3701f73e774e11bfbea6467672c4a0" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0a3701f73e774e11bfbea6467672c4a0" title="简介"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">简介</span></span></h2><div class="notion-text notion-block-08d9d1a154be431d8aac7694cf59120f">本文主要解释事务的ACID特性和相关实现原理，背景是Mysql5.6，数据引擎是Inno db</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-8bb9947063ec4eaaa06d00a86995c5b8" data-id="8bb9947063ec4eaaa06d00a86995c5b8"><span><div id="8bb9947063ec4eaaa06d00a86995c5b8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#8bb9947063ec4eaaa06d00a86995c5b8" title="基础概念"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">基础概念</span></span></h2><div class="notion-text notion-block-9f7dcc5b145a4d22b5478d4f185728e8">事务是指一组操作，这组操作要么全都执行成功，要么全都不执行。</div><div class="notion-text notion-block-512ddd62a58f42de99cf83ef2be0e1e7"><b>MySQL的架构</b></div><div class="notion-text notion-block-5ac3288282e04280a46f8f5a852302c3">首先我们了解一下MySQL的架构</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-0ba1237b49d24b389f1fa449cd1417ff"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:554px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Fs%2F6ef19ad6-d28a-4a6e-9841-0833386af85d%2FUntitled.png%3Fid%3D0ba1237b-49d2-4b38-9f1f-a449cd1417ff%26table%3Dblock%26spaceId%3De7bb21a8-53c5-4141-a2a6-9c3a436ecfe4%26expirationTimestamp%3D1693324800000%26signature%3D2zoQrGzc5HIhGXUuN1ZKQ3Svwgac7NVI83YRnglZQeE?table=block&amp;id=0ba1237b-49d2-4b38-9f1f-a449cd1417ff&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-5d1283186e304c23b568a659ecf78cbe">MySQL的结构一共可以分为三层</div><ol start="1" class="notion-list notion-list-numbered notion-block-1aa0e18c41974742987fd9d47fbb8048"><li>链接层，处理链接，授权认证等</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-e92deecbb42542e89e8ef66620a16860"><li>服务器层，负责语句的解析、优化</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-59771b209e6e4438be7f1eb78a6b83aa"><li>存储引擎层，其中使用最广泛的存储引起是InnoDB。MySQL本身是不支持事务的，事务是由存储引擎实现的。</li></ol><div class="notion-text notion-block-b47f33c4661c49f5ab2a5c54beba5289"><b>事务的提交</b></div><pre class="notion-code language-sql"><code class="language-sql">start transaction<span class="token punctuation">;</span> # 开启一个事务
……  #一条或多条sql语句
commit<span class="token punctuation">;</span> # 提交</code></pre><div class="notion-text notion-block-1d098562b7134ce5baa9aea86c509dce">Mysql中默认是autocommit（自动提交）模式，如果没有显示的开启一个事务，那么每个SQL语句都会当作一个事务执行。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-d47aae2a0c56448ea3fc1b227320c939"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:298px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Fs%2F973a0d0a-5de9-446e-822d-af04d7cee855%2FUntitled.png%3Fid%3Dd47aae2a-0c56-448e-a3fc-1b227320c939%26table%3Dblock%26spaceId%3De7bb21a8-53c5-4141-a2a6-9c3a436ecfe4%26expirationTimestamp%3D1693324800000%26signature%3Dj8UgzY5lQ3_Z4bPdYvb4ASDFUG23m6ONgEOakFSUdAY?table=block&amp;id=d47aae2a-0c56-448e-a3fc-1b227320c939&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-1bc7d398d3d3425c8d77fb0592a52905">我们也可以通过<code class="notion-inline-code"> set autocommit = 0</code>，关闭自动提交；需要注意的是，autocommit参数是针对连接的，在一个连接中修改了参数，不会对其他连接产生影响。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-98ea60f8427f42849f5a4d946099ffa5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:289px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Fs%2Fdac21077-644b-4a99-9fab-29ef336a31ba%2FUntitled.png%3Fid%3D98ea60f8-427f-4284-9f5a-4d946099ffa5%26table%3Dblock%26spaceId%3De7bb21a8-53c5-4141-a2a6-9c3a436ecfe4%26expirationTimestamp%3D1693324800000%26signature%3D6zZ3eFMImGKjT9i93rrLQvBeCzhREObAQFJSOmz8Eec?table=block&amp;id=98ea60f8-427f-4284-9f5a-4d946099ffa5&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-9e8b93b0cb564ef0bc9e44b7316c997c">如果关闭了autocommit，则所有的sql语句都在一个事务中，直到执行了commit或rollback，该事务结束，同时开始了另外一个事务。</div><div class="notion-text notion-block-dcce819a33f34620ba9c200898444260"><b>强制提交的命令</b></div><div class="notion-text notion-block-f38d8ff88b3c4e17a649a08293e31d56">在MySQL中，存在一些特殊的命令，如果在事务中执行了这些命令，会马上强制执行commit提交事务；如DDL语句(create table/drop table/alter/table)、lock tables语句等等。</div><div class="notion-text notion-block-6b8ab9a79f8d4d818fcb0c8ca973c233">不过，常用的select、insert、update和delete命令，都不会强制提交事务。</div><div class="notion-text notion-block-e6b94365a51841279de0c7b606f8abde"><b>ACID</b></div><ul class="notion-list notion-list-disc notion-block-9921fb00e28642bcb722e3692da52113"><li>原子性 Atomicity</li></ul><ul class="notion-list notion-list-disc notion-block-09b95a186e864af99892f654e80b3bed"><li>一致性 Consistency</li></ul><ul class="notion-list notion-list-disc notion-block-56fe21e46c9e4d97a88fca8144a3afe9"><li>隔离性 Isolation</li></ul><ul class="notion-list notion-list-disc notion-block-7f3fcd8e3aba42f6b8cf8e42dea4214a"><li>持久性 Durability</li></ul><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-beb19c4de38e47ee92e228d2204ed5a7" data-id="beb19c4de38e47ee92e228d2204ed5a7"><span><div id="beb19c4de38e47ee92e228d2204ed5a7" class="notion-header-anchor"></div><a class="notion-hash-link" href="#beb19c4de38e47ee92e228d2204ed5a7" title="原子性"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">原子性</span></span></h2><div class="notion-text notion-block-2fbcfca90ebb4d54856f35fae3d9e9ab">原子性是指一个事务是一个不可分割的工作单位，其中的操作要么都做，要么都不做；如果事务中一个sql语句执行失败，则已执行的语句也必须回滚，数据库退回到事务前的状态。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-99fb1eb54ec7464b8358fd2c6c1f5044" data-id="99fb1eb54ec7464b8358fd2c6c1f5044"><span><div id="99fb1eb54ec7464b8358fd2c6c1f5044" class="notion-header-anchor"></div><a class="notion-hash-link" href="#99fb1eb54ec7464b8358fd2c6c1f5044" title="实现原理 undo log"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">实现原理 undo log</span></span></h3><div class="notion-text notion-block-e999346e5d1547daa09e6472b0a47912">可以看到实现原子性的关键是，我们必须要保证sql执行失败的时候进行回滚。在innodb中，回滚的关键依靠的就是undo log。</div><div class="notion-text notion-block-15422d81bd2f4e2bb3b29ba4b48098cd">每当我们对数据库进行修改的时候，就会记录相应操作到undo log中，如果事务需要回滚，那么就会根据undo log里面的记录把数据回滚到初始值。</div><div class="notion-text notion-block-453cab5c74b744429ba5ce225adc6a95">当发生回滚的时候，innodb会根据undo log里面的操作执行逆操作，例如：</div><ul class="notion-list notion-list-disc notion-block-159fbd0a31f7431e9a099181b2721879"><li>记录了insert，就执行delete；记录了delete，就执行insert</li></ul><ul class="notion-list notion-list-disc notion-block-f71610c12b914714a51e6c58b1e7628d"><li>记录了update，则执行相反的update</li></ul><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-ba89199e7b6c440494e509b1c9a666d8" data-id="ba89199e7b6c440494e509b1c9a666d8"><span><div id="ba89199e7b6c440494e509b1c9a666d8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ba89199e7b6c440494e509b1c9a666d8" title="持久性"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">持久性</span></span></h2><div class="notion-text notion-block-61908d3fca06457799357bedcf2039ad">持久性是指事务一旦提交，它对数据库的改变就应该是永久性的。接下来的其他操作或故障不应该对其有任何影响。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-81c7c0b03acd46888a7fc1635e0bd82c" data-id="81c7c0b03acd46888a7fc1635e0bd82c"><span><div id="81c7c0b03acd46888a7fc1635e0bd82c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#81c7c0b03acd46888a7fc1635e0bd82c" title="实现原理 redo log"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">实现原理 redo log</span></span></h3><div class="notion-text notion-block-fb1bbd33fdd84889bf2f8d48d748be35">持久性的实现关键在于及时的把操作记录下来，避免丢失。</div><div class="notion-text notion-block-32dfe978f918410ca0c20ea5dae45ceb">innodb的实现机制是redo log。</div><div class="notion-text notion-block-bc0b056508a04aa6ae643fd7d3c193e1">InnoDB作为MySQL的存储引擎，数据是存放在磁盘中的，但如果每次读写数据都需要磁盘IO，效率会很低。为此，InnoDB提供了缓存(Buffer Pool)，Buffer Pool中包含了磁盘中部分数据页的映射，作为访问数据库的缓冲：当从数据库读取数据时，会首先从Buffer Pool中读取，如果Buffer Pool中没有，则从磁盘读取后放入Buffer Pool；当向数据库写入数据时，会首先写入Buffer Pool，Buffer Pool中修改的数据会定期刷新到磁盘中（这一过程称为刷脏）。</div><div class="notion-text notion-block-9b74ddbf006240bc92ccbe0f4a93c338">Buffer Pool的使用大大提高了读写数据的效率，但是也带了新的问题：如果MySQL宕机，而此时Buffer Pool中修改的数据还没有刷新到磁盘，就会导致数据的丢失，事务的持久性无法保证。</div><div class="notion-text notion-block-b6421d292fe948809ec1368c47446f99">于是，redo log被引入来解决这个问题：当数据修改时，除了修改Buffer Pool中的数据，还会在redo log记录这次操作；当事务提交时，会调用fsync接口对redo log进行刷盘。如果MySQL宕机，重启时可以读取redo log中的数据，对数据库进行恢复。</div><div class="notion-text notion-block-13eb8d7d8e8d43a9bb0ac6d299acaf4c">redo log采用的是WAL（Write-ahead logging，预写式日志），所有修改先写入日志，再更新到Buffer Pool，保证了数据不会因MySQL宕机而丢失，从而满足了持久性要求。</div><blockquote class="notion-quote notion-block-5f9d4acbb29540939d70a7dd33a1fd28">二阶段提交：先写redo log，执行操作，操作成功后再写bin log</blockquote><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-acd626ba84dc4af695a0e247775e5507" data-id="acd626ba84dc4af695a0e247775e5507"><span><div id="acd626ba84dc4af695a0e247775e5507" class="notion-header-anchor"></div><a class="notion-hash-link" href="#acd626ba84dc4af695a0e247775e5507" title="隔离性"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">隔离性</span></span></h2><div class="notion-text notion-block-b5f5e1a1fba94fcb9e5ac2993b06a84e">隔离性要求事务之间互相隔离，不会干扰对方操作。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-b1fe6ae1d6cb4b659c7dade714a13bcd" data-id="b1fe6ae1d6cb4b659c7dade714a13bcd"><span><div id="b1fe6ae1d6cb4b659c7dade714a13bcd" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b1fe6ae1d6cb4b659c7dade714a13bcd" title="隔离不足出现的问题"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">隔离不足出现的问题</span></span></h3><ul class="notion-list notion-list-disc notion-block-3fed38f34f83479aacb1d03837b60d6a"><li>脏读</li></ul><div class="notion-text notion-block-e30e23dda8964f26ac06f8063b55bb48">A事务读取到B事务未提交的数据，一旦B事务回滚，那么读取到的数据就是脏数据</div><ul class="notion-list notion-list-disc notion-block-4d8119b0517343afa7123c1ff754db76"><li>不可重复读</li></ul><div class="notion-text notion-block-17329a6c227c44d5a6ce9fb97d2c9f86">A事务读取的数据被B事务修改，导致前后读取结果不一致</div><ul class="notion-list notion-list-disc notion-block-cd73a46e40d64a08a0125a0e89662d9e"><li>幻读</li></ul><div class="notion-text notion-block-b848670216cd4ca1ae2bcd853366d833">A事务执行范围查询的期间，B事务在范围内写入了一些数据导致A事务再次执行范围查询的时候两次结果不一致</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-f1fc417bb3824444892a0446e63a543d" data-id="f1fc417bb3824444892a0446e63a543d"><span><div id="f1fc417bb3824444892a0446e63a543d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f1fc417bb3824444892a0446e63a543d" title="事务隔离级别"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">事务隔离级别</span></span></h3><div class="notion-text notion-block-8ffc68cb14b64b9e99522d54b60649f2">SQL定义了四种隔离级别，每种隔离级别均解决了一定的问题</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-7ad9eb557b634adc868b9e4b1f0477cf"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:549px;max-width:100%;flex-direction:column"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Ffile.notion.so%2Ff%2Fs%2F2aa8a3e6-4e93-4eb5-be0c-87010cf10e7b%2FUntitled.png%3Fid%3D7ad9eb55-7b63-4adc-868b-9e4b1f0477cf%26table%3Dblock%26spaceId%3De7bb21a8-53c5-4141-a2a6-9c3a436ecfe4%26expirationTimestamp%3D1693324800000%26signature%3DHaEP5x63TgaZqxPHJisFcsm6Cb2yc-PjmCyz4shWLSk?table=block&amp;id=7ad9eb55-7b63-4adc-868b-9e4b1f0477cf&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-cf4da6402db345b5b0492ac22f2a1491">innodb的默认隔离级别是RR，在SQL标准中RR无法解决幻读问题，但是innodb通过MVCC和加锁解决了幻读问题</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-57ccb5cf1912402ba46ead3010e6b74c" data-id="57ccb5cf1912402ba46ead3010e6b74c"><span><div id="57ccb5cf1912402ba46ead3010e6b74c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#57ccb5cf1912402ba46ead3010e6b74c" title="RR隔离级别如何解决不可重复读和幻读"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">RR隔离级别如何解决不可重复读和幻读</span></span></h3><div class="notion-text notion-block-b5a1abbedc424ee8a1a66c3238f9c3f7">一句话总结：</div><ul class="notion-list notion-list-disc notion-block-a1c9f0e815fa43d2b28d318accc94ed9"><li>当前读场景下使用加锁解决</li></ul><ul class="notion-list notion-list-disc notion-block-dd9b9644c39c4913899a520098b91f50"><li>快照读场景下使用MVCC解决</li></ul><div class="notion-text notion-block-f6a164060d9946f5abdec7468c5f3abc"><b>当前读</b></div><div class="notion-text notion-block-da649356810f4908b0362140a0a5d607">定义：读取的数据是最新数据就是当前读</div><div class="notion-text notion-block-0a4929b2ee1e4f3592001f4a67404be8">当前读的触发语句：</div><pre class="notion-code language-sql"><code class="language-sql">select<span class="token operator">...</span>lock <span class="token keyword">in</span> share mode  # 共享锁

select<span class="token operator">...</span><span class="token keyword">for</span> update # 排他锁

update <span class="token punctuation">,</span> <span class="token keyword">delete</span> <span class="token punctuation">,</span> insert</code></pre><div class="notion-text notion-block-790dc0d26e21457f888e75269c5600a2">如果我们执行<code class="notion-inline-code">update , delete , insert</code> 这些写操作的语句，那么Mysql就会加行锁，保证涉及到的数据同一时刻只能被一个事务操作。</div><div class="notion-text notion-block-1fb409c858aa49b49ecd0bdde04e5927">如果显式的加锁，执行select语句，那么mysql就会加上next-key lock来避免产生幻读问题</div><div class="notion-text notion-block-395fc70f62814d05b02fb2f173e779ad">next-key lock是行锁和间隙锁的结合体，首先使用行锁来锁住涉及到的数据，然后同时使用间隙锁锁住数据之间的间隙，不让其他事务进行插入。</div><div class="notion-text notion-block-9f354af42cfd43db98b75d998e6870c3"><b>快照读</b></div><div class="notion-text notion-block-9e6453392a3043e2851e561f7df39790">快照读指的是读取到的数据是某一时刻的快照</div><div class="notion-text notion-block-f3eeeb1e1bab4b8aa7686c34c8cf6139">快照读的触发语句：</div><pre class="notion-code language-sql"><code class="language-sql"><span class="token function">简单的select操作</span><span class="token punctuation">(</span>不包括 select <span class="token operator">...</span> lock <span class="token keyword">in</span> share mode<span class="token punctuation">,</span> select <span class="token operator">...</span> <span class="token keyword">for</span> update<span class="token punctuation">)</span>。</code></pre><div class="notion-text notion-block-71d1fce20490445daabf362812cfa3b7">快照读解决不可重复读和幻读问题的是MVCC。</div><div class="notion-text notion-block-00696189db7a4fa290320bbdbbfd91ee"><b>MVCC</b></div><div class="notion-text notion-block-c7923d720e694917a99a7427c83ceef9">多版本并发控制。</div><div class="notion-text notion-block-e853c645cbc44fd1abad342f8ca5892c">MVCC依赖于几个关键组件</div><ul class="notion-list notion-list-disc notion-block-82cf96148f0b40aeabd64b069e7ce81f"><li>隐藏列</li></ul><div class="notion-text notion-block-05dd04f6376f4998b852d73d6beb6c40">innodb中的隐藏列有：<div class="notion-text-children"><ul class="notion-list notion-list-disc notion-block-9fc713ca1d0e4dd8948707d3260b7991"><li>本行数据的事务id，指向undo log的指针，自增id</li></ul></div></div><ul class="notion-list notion-list-disc notion-block-b6febcae34a54099af6e197f7bbf5a8d"><li>基于undo log的版本链</li></ul><div class="notion-text notion-block-89ec89477fdd4d47bcd66a6517511710">每个指针会指向更早版本的undo log，从而形成一条版本脸</div><ul class="notion-list notion-list-disc notion-block-eb1993700e4246bca285d5f044d6bc89"><li>ReadView</li></ul><div class="notion-text notion-block-7de7146eece04699a3016e1af89221b8">通过版本链和隐藏列，Mysql可以将数据恢复到指定版本。</div><div class="notion-text notion-block-6ad992da732e4298a27cdd8210cabfbe">所谓的ReadView就是事务某一时刻给整个事务系统（trx_sys）打快照，之后在进行读操作的时候，根据事务id和快照相比，从而判断数据是否对当前事务可见。</div><div class="notion-text notion-block-247fde6bb4044c1a9e6d415fbca97799">trx_sys中又包含了几个字段</div><ul class="notion-list notion-list-disc notion-block-70bd1414b1f14c4aaf7b585db02c5216"><li>low_limit_id：表示生成ReadView时系统中应该分配给下一个事务的id。如果数据的事务id大于等于low_limit_id，则对该ReadView不可见。</li></ul><ul class="notion-list notion-list-disc notion-block-7a8087c530764bbbbe42a41febad73eb"><li>up_limit_id：表示生成ReadView时当前系统中活跃的读写事务中最小的事务id。如果数据的事务id小于up_limit_id，则对该ReadView可见。</li></ul><ul class="notion-list notion-list-disc notion-block-77a1208f3b35438bba2679065d3ea2c8"><li>rw_trx_ids：表示生成ReadView时当前系统中活跃的读写事务的事务id列表。如果数据的事务id在low_limit_id和up_limit_id之间，则需要判断事务id是否在rw_trx_ids中：如果在，说明生成ReadView时事务仍在活跃中，因此数据对ReadView不可见；如果不在，说明生成ReadView时事务已经提交了，因此数据对ReadView可见。</li></ul><div class="notion-text notion-block-0b3fadacad2649a6a4666c46d5bc5b77">总结：</div><div class="notion-text notion-block-7baa289aeb91427d955205746bbdc6f2">依靠快照和事务id，MVCC决定哪些数据可见哪些数据不可见，从而解决了不可重复读和幻读问题。MVCC和核心是undo log的版本链，通过版本链可以恢复数据。</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-108c2302a9874e8baffd93e1122db6c6" data-id="108c2302a9874e8baffd93e1122db6c6"><span><div id="108c2302a9874e8baffd93e1122db6c6" class="notion-header-anchor"></div><a class="notion-hash-link" href="#108c2302a9874e8baffd93e1122db6c6" title="一致性"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">一致性</span></span></h2><div class="notion-text notion-block-715a02ae077441469afde55493bc3e70">一致性是指事务执行结束后，<b>数据库的完整性约束没有被破坏，事务执行的前后都是合法的数据状态。</b>数据库的完整性约束包括但不限于：实体完整性（如行的主键存在且唯一）、列完整性（如字段的类型、大小、长度要符合要求）、用户自定义完整性（如转账前后，两个账户余额的和应该不变）。</div><div class="notion-text notion-block-13898e3ec31d4a0b9b66c25220b5fc11">常见的例子就是，A用户给B用户转账1万元，转账前后两个账户钱的和是一致的，不会产生变化。相当于从一个合法的状态转换到了另一个合法的状态。</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-a20114a9979348dfb541b7520d745fd9" data-id="a20114a9979348dfb541b7520d745fd9"><span><div id="a20114a9979348dfb541b7520d745fd9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a20114a9979348dfb541b7520d745fd9" title="如何实现一致性"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">如何实现一致性</span></span></h3><div class="notion-text notion-block-dd06f68cd25d444e948b0cd59e745189">一致性是事务追求的最终目标，它的实现基于原子性、隔离性、持久性的实现基础。在此基础上，要求数据库提供保障，例如不允许向整形列插入字符串值等。</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-8610896280b9410f8eadba5a322840c8" data-id="8610896280b9410f8eadba5a322840c8"><span><div id="8610896280b9410f8eadba5a322840c8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#8610896280b9410f8eadba5a322840c8" title="总结"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">总结</span></span></h2><ul class="notion-list notion-list-disc notion-block-5d268e60c47043d3a5f1beeb6d6e7c5c"><li>原子性</li><ul class="notion-list notion-list-disc notion-block-5d268e60c47043d3a5f1beeb6d6e7c5c"><li>要么全部执行，要么全部不执行</li><li>undo log，回滚数据</li></ul></ul><ul class="notion-list notion-list-disc notion-block-c563d9319ae044f7977557f8d1a23eb8"><li>持久性</li><ul class="notion-list notion-list-disc notion-block-c563d9319ae044f7977557f8d1a23eb8"><li>事物的操作是永久的</li><li>redo log，预写操作，保证操作不丢失及时落盘</li></ul></ul><ul class="notion-list notion-list-disc notion-block-3e7d2aaca7f34356b7d9121e04e75a3c"><li>隔离性</li><ul class="notion-list notion-list-disc notion-block-3e7d2aaca7f34356b7d9121e04e75a3c"><li>事务之间互相隔离，不影响对方执行</li><li>当前读使用锁机制，快照读使用MVCC</li></ul></ul><ul class="notion-list notion-list-disc notion-block-1668658ccd7d46e0819c849db7baf6e3"><li>一致性</li><ul class="notion-list notion-list-disc notion-block-1668658ccd7d46e0819c849db7baf6e3"><li>事务执行前后，数据的状态是合法的，数据库的完整性约束没有被破坏</li><li>要求我们实现好原子性、持久性、隔离性</li></ul></ul><div class="notion-blank notion-block-90e5495ab14a4fc2a85469a6ccdeaa49"> </div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-24a4fee48068441b86e14a944b371fc1" data-id="24a4fee48068441b86e14a944b371fc1"><span><div id="24a4fee48068441b86e14a944b371fc1" class="notion-header-anchor"></div><a class="notion-hash-link" href="#24a4fee48068441b86e14a944b371fc1" title="Ref"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Ref</span></span></h2><div class="notion-text notion-block-7ef6aa6d75f84c2b96206e17d52ce643"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.cnblogs.com/kismetv/p/10331633.html">深入学习MySQL事务：ACID特性的实现原理 - 编程迷思 - 博客园 (cnblogs.com)</a></div></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">← <!-- -->返回</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">↑ <!-- -->回到顶部</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>© <!-- -->hhmy<!-- --> <!-- -->2019 - 2023</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","date":{"start_date":"2022-11-17"},"type":["Post"],"slug":"acid","tags":["数据库"],"summary":"事务的 ACID 特性是如何实现的","title":"ACID和实现原理","status":["Published"],"createdTime":"Fri Dec 16 2022 08:30:59 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":null,"pageCover":null},"blockMap":{"block":{"0001a0d6-5549-4fc5-955f-57c356d6e87e":{"value":{"id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","version":90,"type":"page","properties":{"!`\"w":[["Yes"]],"98uZ":[["介绍数据库事务ACID的特性以及如何实现"]],":H`m":[["Yes"]],"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2022-11-17"}]]]],"`gQ~":[["Post"]],"d]hq":[["acid"]],"sD^m":[["数据库"]],"wz|S":[["事务的 ACID 特性是如何实现的"]],"xY$N":[["‣",[["d",{"type":"date","start_date":"2022-11-17"}]]]],"{iD?":[["数据库"]],"|Ay0":[["post"]],"title":[["ACID和实现原理"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["2b54ec18-1e9c-4251-a7eb-42fc2f33f6dd","0a3701f7-3e77-4e11-bfbe-a6467672c4a0","08d9d1a1-54be-431d-8aac-7694cf59120f","8bb99470-63ec-4eaa-a06d-00a86995c5b8","9f7dcc5b-145a-4d22-b547-8d4f185728e8","512ddd62-a58f-42de-99cf-83ef2be0e1e7","5ac32882-82e0-4280-a46f-8f5a852302c3","0ba1237b-49d2-4b38-9f1f-a449cd1417ff","5d128318-6e30-4c23-b568-a659ecf78cbe","1aa0e18c-4197-4742-987f-d9d47fbb8048","e92deecb-b425-42e8-9e8e-f66620a16860","59771b20-9e6e-4438-be7f-1eb78a6b83aa","b47f33c4-661c-49f5-ab2a-5c54beba5289","fff7630c-c221-410f-b4e5-ab6ee8fc6e93","1d098562-b713-4ce5-baa9-aea86c509dce","d47aae2a-0c56-448e-a3fc-1b227320c939","1bc7d398-d3d3-425c-8d77-fb0592a52905","98ea60f8-427f-4284-9f5a-4d946099ffa5","9e8b93b0-cb56-4ef0-bc9e-44b7316c997c","dcce819a-33f3-4620-ba9c-200898444260","f38d8ff8-8b3c-4e17-a649-a08293e31d56","6b8ab9a7-9f8d-4d81-8fcb-0c8ca973c233","e6b94365-a518-4127-9de0-c7b606f8abde","9921fb00-e286-42bc-b722-e3692da52113","09b95a18-6e86-4af9-9892-f654e80b3bed","56fe21e4-6c9e-4d97-a88f-ca8144a3afe9","7f3fcd8e-3aba-42f6-b8cf-8e42dea4214a","beb19c4d-e38e-47ee-92e2-28d2204ed5a7","2fbcfca9-0ebb-4d54-856f-35fae3d9e9ab","99fb1eb5-4ec7-464b-8358-fd2c6c1f5044","e999346e-5d15-47da-a09e-6472b0a47912","15422d81-bd2f-4e2b-b3b2-9ba4b48098cd","453cab5c-74b7-4442-9ba5-ce225adc6a95","159fbd0a-31f7-431e-9a09-9181b2721879","f71610c1-2b91-4714-a51e-6c58b1e7628d","ba89199e-7b6c-4404-94e5-09b1c9a666d8","61908d3f-ca06-4577-9935-7bedcf2039ad","81c7c0b0-3acd-4688-8a7f-c1635e0bd82c","fb1bbd33-fdd8-4889-bf2f-8d48d748be35","32dfe978-f918-410c-a0c2-0ea5dae45ceb","bc0b0565-08a0-4aa6-ae64-3fd7d3c193e1","9b74ddbf-0062-40bc-92cc-be0f4a93c338","b6421d29-2fe9-4880-9ec1-368c47446f99","13eb8d7d-8e8d-43a9-bb0a-c6d299acaf4c","5f9d4acb-b295-4093-9d70-a7dd33a1fd28","acd626ba-84dc-4af6-95a0-e247775e5507","b5f5e1a1-fba9-4fcb-9e5a-c2993b06a84e","b1fe6ae1-d6cb-4b65-9c7d-ade714a13bcd","3fed38f3-4f83-479a-acb1-d03837b60d6a","e30e23dd-a896-4f26-ac06-f8063b55bb48","4d8119b0-5173-43af-a712-3c1ff754db76","17329a6c-227c-44d5-a6ce-9fb97d2c9f86","cd73a46e-40d6-4a08-a012-5a0e89662d9e","b8486702-16cd-4ca1-ae2b-cd853366d833","f1fc417b-b382-4444-892a-0446e63a543d","8ffc68cb-14b6-4b9e-9952-2d54b60649f2","7ad9eb55-7b63-4adc-868b-9e4b1f0477cf","cf4da640-2db3-45b5-b049-2ac22f2a1491","57ccb5cf-1912-402b-a46e-ad3010e6b74c","b5a1abbe-dc42-4ee8-a1a6-6c3238f9c3f7","a1c9f0e8-15fa-43d2-b28d-318accc94ed9","dd9b9644-c39c-4913-899a-520098b91f50","f6a16406-0d99-46f5-abde-c7468c5f3abc","da649356-810f-4908-b036-2140a0a5d607","0a4929b2-ee1e-4f35-9200-1f4a67404be8","bc60fb9a-0bda-418a-81fd-48d48d2a3239","790dc0d2-6e21-457f-888e-75269c5600a2","1fb409c8-58aa-49b4-9ecd-0bdde04e5927","395fc70f-6281-4d05-b02f-b2f173e779ad","9f354af4-2cfd-43db-98b7-5d998e6870c3","9e645339-2a30-43e2-851e-561f7df39790","f3eeeb1e-1bab-4b8a-a768-6c34c8cf6139","5fc98598-62ca-4510-90d4-d8bc906423cc","71d1fce2-0490-445d-aabf-362812cfa3b7","00696189-db7a-4fa2-9032-0bbdbbfd91ee","c7923d72-0e69-4917-a99a-7427c83ceef9","e853c645-cbc4-4fd1-abad-342f8ca5892c","82cf9614-8f0b-40ae-abd6-4b069e7ce81f","05dd04f6-376f-4998-b852-d73d6beb6c40","b6febcae-34a5-4099-af6e-197f7bbf5a8d","89ec8947-7fdd-4d47-bcd6-6a6517511710","eb199370-0e42-46bc-a285-d5f044d6bc89","7de7146e-ece0-4699-a301-6e1af89221b8","6ad992da-732e-4298-a27c-dd8210cabfbe","247fde6b-b404-4c1a-9e6d-415fbca97799","70bd1414-b1f1-4c4a-af7b-585db02c5216","7a8087c5-3076-4bbb-be42-a41febad73eb","77a1208f-3b35-438b-ba26-79065d3ea2c8","0b3fadac-ad26-49a6-a466-6c46d5bc5b77","7baa289a-eb91-427d-9552-05746bbdc6f2","108c2302-a987-4e8b-affd-93e1122db6c6","715a02ae-0774-4146-9afd-e55493bc3e70","13898e3e-c31d-4a0b-9b66-c25220b5fc11","a20114a9-9793-48df-b541-b7520d745fd9","dd06f68c-d25d-444e-948b-0cd59e745189","86108962-80b9-410f-8ead-ba5a322840c8","5d268e60-c470-43d3-a5f1-beeb6d6e7c5c","c563d931-9ae0-44f7-9775-57f8d1a23eb8","3e7d2aac-a7f3-4356-b7d9-121e04e75a3c","1668658c-cd7d-46e0-819c-849db7baf6e3","90e5495a-b14a-4fc2-a854-69a6ccdeaa49","24a4fee4-8068-441b-86e1-4a944b371fc1","7ef6aa6d-75f8-4c2b-9620-6e17d52ce643"],"format":{"copied_from_pointer":{"id":"88328a5c-5b89-4777-b3dc-f26270f78697","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459791,"last_edited_time":1672296900000,"parent_id":"a3ce75fe-7085-406b-a33f-74958ef7ee13","parent_table":"collection","alive":true,"copied_from":"88328a5c-5b89-4777-b3dc-f26270f78697","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1d21f050-c8c4-41f3-9fd4-8ff7de49c962":{"value":{"id":"1d21f050-c8c4-41f3-9fd4-8ff7de49c962","version":58,"type":"collection_view_page","view_ids":["876cf270-3f6b-4f1a-b6c8-5ffbd27ca40f"],"collection_id":"a3ce75fe-7085-406b-a33f-74958ef7ee13","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"a3ce75fe-7085-406b-a33f-74958ef7ee13","table":"collection","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"copied_from_pointer":{"id":"866916e3-b939-468b-9b6f-1d47dce99f9c","table":"block","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec"},{"role":"reader","type":"public_permission","added_timestamp":1671187403441}],"created_time":1670483100421,"last_edited_time":1693035413780,"parent_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4","parent_table":"space","alive":true,"copied_from":"866916e3-b939-468b-9b6f-1d47dce99f9c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"2b54ec18-1e9c-4251-a7eb-42fc2f33f6dd":{"value":{"id":"2b54ec18-1e9c-4251-a7eb-42fc2f33f6dd","version":1,"type":"table_of_contents","format":{"block_color":"gray","copied_from_pointer":{"id":"89077918-aec4-45a8-9bec-68b9c3b2b6b8","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"89077918-aec4-45a8-9bec-68b9c3b2b6b8","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"0a3701f7-3e77-4e11-bfbe-a6467672c4a0":{"value":{"id":"0a3701f7-3e77-4e11-bfbe-a6467672c4a0","version":1,"type":"header","properties":{"title":[["简介"]]},"format":{"copied_from_pointer":{"id":"71ee7729-f972-4eed-a13d-3d2e06b51380","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"71ee7729-f972-4eed-a13d-3d2e06b51380","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"08d9d1a1-54be-431d-8aac-7694cf59120f":{"value":{"id":"08d9d1a1-54be-431d-8aac-7694cf59120f","version":1,"type":"text","properties":{"title":[["本文主要解释事务的ACID特性和相关实现原理，背景是Mysql5.6，数据引擎是Inno db"]]},"format":{"copied_from_pointer":{"id":"7fbb4de4-99f5-45de-a372-413935fb374c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"7fbb4de4-99f5-45de-a372-413935fb374c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"8bb99470-63ec-4eaa-a06d-00a86995c5b8":{"value":{"id":"8bb99470-63ec-4eaa-a06d-00a86995c5b8","version":1,"type":"header","properties":{"title":[["基础概念"]]},"format":{"copied_from_pointer":{"id":"07c2736c-41a6-4367-b330-9ffedbc39526","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"07c2736c-41a6-4367-b330-9ffedbc39526","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9f7dcc5b-145a-4d22-b547-8d4f185728e8":{"value":{"id":"9f7dcc5b-145a-4d22-b547-8d4f185728e8","version":1,"type":"text","properties":{"title":[["事务是指一组操作，这组操作要么全都执行成功，要么全都不执行。"]]},"format":{"copied_from_pointer":{"id":"003a6bcc-84be-476f-868d-756fc5561da3","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"003a6bcc-84be-476f-868d-756fc5561da3","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"512ddd62-a58f-42de-99cf-83ef2be0e1e7":{"value":{"id":"512ddd62-a58f-42de-99cf-83ef2be0e1e7","version":1,"type":"text","properties":{"title":[["MySQL的架构",[["b"]]]]},"format":{"copied_from_pointer":{"id":"361d8986-af63-4a85-a136-ebb40b9dd83e","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"361d8986-af63-4a85-a136-ebb40b9dd83e","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5ac32882-82e0-4280-a46f-8f5a852302c3":{"value":{"id":"5ac32882-82e0-4280-a46f-8f5a852302c3","version":1,"type":"text","properties":{"title":[["首先我们了解一下MySQL的架构"]]},"format":{"copied_from_pointer":{"id":"f515b63b-eaf7-46e1-b796-37e5969d76f7","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"f515b63b-eaf7-46e1-b796-37e5969d76f7","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"0ba1237b-49d2-4b38-9f1f-a449cd1417ff":{"value":{"id":"0ba1237b-49d2-4b38-9f1f-a449cd1417ff","version":1,"type":"image","properties":{"size":[["56.1KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6ef19ad6-d28a-4a6e-9841-0833386af85d/Untitled.png"]]},"format":{"block_width":554,"block_height":393,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6ef19ad6-d28a-4a6e-9841-0833386af85d/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7093862815884476,"copied_from_pointer":{"id":"3bc20f32-6816-44ac-9ed8-a7ea35f0c9cc","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"block_preserve_scale":true},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"3bc20f32-6816-44ac-9ed8-a7ea35f0c9cc","file_ids":["6ef19ad6-d28a-4a6e-9841-0833386af85d"],"created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5d128318-6e30-4c23-b568-a659ecf78cbe":{"value":{"id":"5d128318-6e30-4c23-b568-a659ecf78cbe","version":1,"type":"text","properties":{"title":[["MySQL的结构一共可以分为三层"]]},"format":{"copied_from_pointer":{"id":"670d7c6a-5a8b-4970-9024-767245db19f2","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"670d7c6a-5a8b-4970-9024-767245db19f2","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1aa0e18c-4197-4742-987f-d9d47fbb8048":{"value":{"id":"1aa0e18c-4197-4742-987f-d9d47fbb8048","version":1,"type":"numbered_list","properties":{"title":[["链接层，处理链接，授权认证等"]]},"format":{"copied_from_pointer":{"id":"cdf482ce-4d3d-4497-b69a-937383451052","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cdf482ce-4d3d-4497-b69a-937383451052","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"e92deecb-b425-42e8-9e8e-f66620a16860":{"value":{"id":"e92deecb-b425-42e8-9e8e-f66620a16860","version":1,"type":"numbered_list","properties":{"title":[["服务器层，负责语句的解析、优化"]]},"format":{"copied_from_pointer":{"id":"864c56de-ed4f-46bc-8066-afcd048fed3b","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"864c56de-ed4f-46bc-8066-afcd048fed3b","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"59771b20-9e6e-4438-be7f-1eb78a6b83aa":{"value":{"id":"59771b20-9e6e-4438-be7f-1eb78a6b83aa","version":1,"type":"numbered_list","properties":{"title":[["存储引擎层，其中使用最广泛的存储引起是InnoDB。MySQL本身是不支持事务的，事务是由存储引擎实现的。"]]},"format":{"copied_from_pointer":{"id":"0ea59a57-ec54-4079-9a44-517c422b6bf7","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"0ea59a57-ec54-4079-9a44-517c422b6bf7","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b47f33c4-661c-49f5-ab2a-5c54beba5289":{"value":{"id":"b47f33c4-661c-49f5-ab2a-5c54beba5289","version":1,"type":"text","properties":{"title":[["事务的提交",[["b"]]]]},"format":{"copied_from_pointer":{"id":"049ce2b9-997c-4bc1-b684-aa0750581386","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"049ce2b9-997c-4bc1-b684-aa0750581386","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"fff7630c-c221-410f-b4e5-ab6ee8fc6e93":{"value":{"id":"fff7630c-c221-410f-b4e5-ab6ee8fc6e93","version":1,"type":"code","properties":{"title":[["start transaction; # 开启一个事务\n……  #一条或多条sql语句\ncommit; # 提交"]],"language":[["SQL"]]},"format":{"copied_from_pointer":{"id":"c13e94ed-aae8-4438-aa0c-7b67ab44e03a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"c13e94ed-aae8-4438-aa0c-7b67ab44e03a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1d098562-b713-4ce5-baa9-aea86c509dce":{"value":{"id":"1d098562-b713-4ce5-baa9-aea86c509dce","version":1,"type":"text","properties":{"title":[["Mysql中默认是autocommit（自动提交）模式，如果没有显示的开启一个事务，那么每个SQL语句都会当作一个事务执行。"]]},"format":{"copied_from_pointer":{"id":"2b6113ca-659a-4244-85b3-e81c811bbf80","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"2b6113ca-659a-4244-85b3-e81c811bbf80","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"d47aae2a-0c56-448e-a3fc-1b227320c939":{"value":{"id":"d47aae2a-0c56-448e-a3fc-1b227320c939","version":1,"type":"image","properties":{"size":[["4.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/973a0d0a-5de9-446e-822d-af04d7cee855/Untitled.png"]]},"format":{"block_width":298,"block_height":95,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/973a0d0a-5de9-446e-822d-af04d7cee855/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.3187919463087248,"copied_from_pointer":{"id":"d8ae8fc6-767a-4f7d-93fd-53cc3bb5c052","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"block_preserve_scale":true},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"d8ae8fc6-767a-4f7d-93fd-53cc3bb5c052","file_ids":["973a0d0a-5de9-446e-822d-af04d7cee855"],"created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1bc7d398-d3d3-425c-8d77-fb0592a52905":{"value":{"id":"1bc7d398-d3d3-425c-8d77-fb0592a52905","version":1,"type":"text","properties":{"title":[["我们也可以通过"],[" set autocommit = 0",[["c"]]],["，关闭自动提交；需要注意的是，autocommit参数是针对连接的，在一个连接中修改了参数，不会对其他连接产生影响。"]]},"format":{"copied_from_pointer":{"id":"790257b4-da4f-405a-886f-2d8c94d61593","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"790257b4-da4f-405a-886f-2d8c94d61593","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"98ea60f8-427f-4284-9f5a-4d946099ffa5":{"value":{"id":"98ea60f8-427f-4284-9f5a-4d946099ffa5","version":1,"type":"image","properties":{"size":[["6.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dac21077-644b-4a99-9fab-29ef336a31ba/Untitled.png"]]},"format":{"block_width":289,"block_height":134,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dac21077-644b-4a99-9fab-29ef336a31ba/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.46366782006920415,"copied_from_pointer":{"id":"fea3e3fd-7d8a-4738-8882-85c3f4c4c300","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"block_preserve_scale":true},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"fea3e3fd-7d8a-4738-8882-85c3f4c4c300","file_ids":["dac21077-644b-4a99-9fab-29ef336a31ba"],"created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9e8b93b0-cb56-4ef0-bc9e-44b7316c997c":{"value":{"id":"9e8b93b0-cb56-4ef0-bc9e-44b7316c997c","version":1,"type":"text","properties":{"title":[["如果关闭了autocommit，则所有的sql语句都在一个事务中，直到执行了commit或rollback，该事务结束，同时开始了另外一个事务。"]]},"format":{"copied_from_pointer":{"id":"8aaf541a-beaf-49f9-b608-acb2edb4ee5d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"8aaf541a-beaf-49f9-b608-acb2edb4ee5d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"dcce819a-33f3-4620-ba9c-200898444260":{"value":{"id":"dcce819a-33f3-4620-ba9c-200898444260","version":1,"type":"text","properties":{"title":[["强制提交的命令",[["b"]]]]},"format":{"copied_from_pointer":{"id":"d706d7f2-ba70-481c-9788-d189ba8244d9","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"d706d7f2-ba70-481c-9788-d189ba8244d9","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"f38d8ff8-8b3c-4e17-a649-a08293e31d56":{"value":{"id":"f38d8ff8-8b3c-4e17-a649-a08293e31d56","version":1,"type":"text","properties":{"title":[["在MySQL中，存在一些特殊的命令，如果在事务中执行了这些命令，会马上强制执行commit提交事务；如DDL语句(create table/drop table/alter/table)、lock tables语句等等。"]]},"format":{"copied_from_pointer":{"id":"b214e851-4ffb-4cc0-bd90-e89a0dedc97a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"b214e851-4ffb-4cc0-bd90-e89a0dedc97a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"6b8ab9a7-9f8d-4d81-8fcb-0c8ca973c233":{"value":{"id":"6b8ab9a7-9f8d-4d81-8fcb-0c8ca973c233","version":1,"type":"text","properties":{"title":[["不过，常用的select、insert、update和delete命令，都不会强制提交事务。"]]},"format":{"copied_from_pointer":{"id":"1a7450cc-3ab7-49fe-a4c6-9d3dd0a1661d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"1a7450cc-3ab7-49fe-a4c6-9d3dd0a1661d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"e6b94365-a518-4127-9de0-c7b606f8abde":{"value":{"id":"e6b94365-a518-4127-9de0-c7b606f8abde","version":1,"type":"text","properties":{"title":[["ACID",[["b"]]]]},"format":{"copied_from_pointer":{"id":"ccf66022-4b7b-4e5f-91f3-41b4ad2e38f7","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ccf66022-4b7b-4e5f-91f3-41b4ad2e38f7","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9921fb00-e286-42bc-b722-e3692da52113":{"value":{"id":"9921fb00-e286-42bc-b722-e3692da52113","version":1,"type":"bulleted_list","properties":{"title":[["原子性 Atomicity"]]},"format":{"copied_from_pointer":{"id":"1b2a8c42-202d-456f-bd2e-14ed2345b8d6","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"1b2a8c42-202d-456f-bd2e-14ed2345b8d6","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"09b95a18-6e86-4af9-9892-f654e80b3bed":{"value":{"id":"09b95a18-6e86-4af9-9892-f654e80b3bed","version":1,"type":"bulleted_list","properties":{"title":[["一致性 Consistency"]]},"format":{"copied_from_pointer":{"id":"cd4432ea-a295-4b44-a02e-1ac42551e175","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cd4432ea-a295-4b44-a02e-1ac42551e175","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"56fe21e4-6c9e-4d97-a88f-ca8144a3afe9":{"value":{"id":"56fe21e4-6c9e-4d97-a88f-ca8144a3afe9","version":1,"type":"bulleted_list","properties":{"title":[["隔离性 Isolation"]]},"format":{"copied_from_pointer":{"id":"cfdd2808-9924-4289-8e54-ae7de6bd7d80","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cfdd2808-9924-4289-8e54-ae7de6bd7d80","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7f3fcd8e-3aba-42f6-b8cf-8e42dea4214a":{"value":{"id":"7f3fcd8e-3aba-42f6-b8cf-8e42dea4214a","version":1,"type":"bulleted_list","properties":{"title":[["持久性 Durability"]]},"format":{"copied_from_pointer":{"id":"789168c9-b500-4f50-bcd3-8a1fa0886f8c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"789168c9-b500-4f50-bcd3-8a1fa0886f8c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"beb19c4d-e38e-47ee-92e2-28d2204ed5a7":{"value":{"id":"beb19c4d-e38e-47ee-92e2-28d2204ed5a7","version":1,"type":"header","properties":{"title":[["原子性"]]},"format":{"copied_from_pointer":{"id":"1c4f3cb5-3138-4615-8668-7a1306ab0fb5","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"1c4f3cb5-3138-4615-8668-7a1306ab0fb5","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"2fbcfca9-0ebb-4d54-856f-35fae3d9e9ab":{"value":{"id":"2fbcfca9-0ebb-4d54-856f-35fae3d9e9ab","version":1,"type":"text","properties":{"title":[["原子性是指一个事务是一个不可分割的工作单位，其中的操作要么都做，要么都不做；如果事务中一个sql语句执行失败，则已执行的语句也必须回滚，数据库退回到事务前的状态。"]]},"format":{"copied_from_pointer":{"id":"026c0cf1-540f-4f9e-b917-ba74598d01db","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"026c0cf1-540f-4f9e-b917-ba74598d01db","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"99fb1eb5-4ec7-464b-8358-fd2c6c1f5044":{"value":{"id":"99fb1eb5-4ec7-464b-8358-fd2c6c1f5044","version":1,"type":"sub_header","properties":{"title":[["实现原理 undo log"]]},"format":{"copied_from_pointer":{"id":"fb0137d4-c64c-495c-bbf4-cf292e3a369a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"fb0137d4-c64c-495c-bbf4-cf292e3a369a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"e999346e-5d15-47da-a09e-6472b0a47912":{"value":{"id":"e999346e-5d15-47da-a09e-6472b0a47912","version":1,"type":"text","properties":{"title":[["可以看到实现原子性的关键是，我们必须要保证sql执行失败的时候进行回滚。在innodb中，回滚的关键依靠的就是undo log。"]]},"format":{"copied_from_pointer":{"id":"42bfb8f2-8229-43f9-bb89-ca1b11eb4410","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"42bfb8f2-8229-43f9-bb89-ca1b11eb4410","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"15422d81-bd2f-4e2b-b3b2-9ba4b48098cd":{"value":{"id":"15422d81-bd2f-4e2b-b3b2-9ba4b48098cd","version":1,"type":"text","properties":{"title":[["每当我们对数据库进行修改的时候，就会记录相应操作到undo log中，如果事务需要回滚，那么就会根据undo log里面的记录把数据回滚到初始值。"]]},"format":{"copied_from_pointer":{"id":"b03136ae-808b-48ba-bb3a-0a3e33a090ec","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"b03136ae-808b-48ba-bb3a-0a3e33a090ec","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"453cab5c-74b7-4442-9ba5-ce225adc6a95":{"value":{"id":"453cab5c-74b7-4442-9ba5-ce225adc6a95","version":1,"type":"text","properties":{"title":[["当发生回滚的时候，innodb会根据undo log里面的操作执行逆操作，例如："]]},"format":{"copied_from_pointer":{"id":"2aa48f75-c4a9-493a-95ce-82b73836372a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"2aa48f75-c4a9-493a-95ce-82b73836372a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"159fbd0a-31f7-431e-9a09-9181b2721879":{"value":{"id":"159fbd0a-31f7-431e-9a09-9181b2721879","version":1,"type":"bulleted_list","properties":{"title":[["记录了insert，就执行delete；记录了delete，就执行insert"]]},"format":{"copied_from_pointer":{"id":"395e7fd2-256e-4234-a02e-7ece188b864c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"395e7fd2-256e-4234-a02e-7ece188b864c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"f71610c1-2b91-4714-a51e-6c58b1e7628d":{"value":{"id":"f71610c1-2b91-4714-a51e-6c58b1e7628d","version":1,"type":"bulleted_list","properties":{"title":[["记录了update，则执行相反的update"]]},"format":{"copied_from_pointer":{"id":"a5a35824-ef90-4fe5-94f6-4e5cb6f286cf","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"a5a35824-ef90-4fe5-94f6-4e5cb6f286cf","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"ba89199e-7b6c-4404-94e5-09b1c9a666d8":{"value":{"id":"ba89199e-7b6c-4404-94e5-09b1c9a666d8","version":1,"type":"header","properties":{"title":[["持久性"]]},"format":{"copied_from_pointer":{"id":"a2515967-7163-49c7-aebb-d2c7ea3bf2be","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"a2515967-7163-49c7-aebb-d2c7ea3bf2be","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"61908d3f-ca06-4577-9935-7bedcf2039ad":{"value":{"id":"61908d3f-ca06-4577-9935-7bedcf2039ad","version":1,"type":"text","properties":{"title":[["持久性是指事务一旦提交，它对数据库的改变就应该是永久性的。接下来的其他操作或故障不应该对其有任何影响。"]]},"format":{"copied_from_pointer":{"id":"e26dab68-9b40-4570-8d24-174b75b76e23","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"e26dab68-9b40-4570-8d24-174b75b76e23","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"81c7c0b0-3acd-4688-8a7f-c1635e0bd82c":{"value":{"id":"81c7c0b0-3acd-4688-8a7f-c1635e0bd82c","version":1,"type":"sub_header","properties":{"title":[["实现原理 redo log"]]},"format":{"copied_from_pointer":{"id":"b633ed2a-3aae-4313-8379-a91811ee9d89","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"b633ed2a-3aae-4313-8379-a91811ee9d89","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"fb1bbd33-fdd8-4889-bf2f-8d48d748be35":{"value":{"id":"fb1bbd33-fdd8-4889-bf2f-8d48d748be35","version":1,"type":"text","properties":{"title":[["持久性的实现关键在于及时的把操作记录下来，避免丢失。"]]},"format":{"copied_from_pointer":{"id":"8c2c2a46-de46-4215-ba09-21c36e7c1792","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"8c2c2a46-de46-4215-ba09-21c36e7c1792","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"32dfe978-f918-410c-a0c2-0ea5dae45ceb":{"value":{"id":"32dfe978-f918-410c-a0c2-0ea5dae45ceb","version":1,"type":"text","properties":{"title":[["innodb的实现机制是redo log。"]]},"format":{"copied_from_pointer":{"id":"fe6d8071-76e5-483c-96cd-2bf27ad83601","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"fe6d8071-76e5-483c-96cd-2bf27ad83601","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"bc0b0565-08a0-4aa6-ae64-3fd7d3c193e1":{"value":{"id":"bc0b0565-08a0-4aa6-ae64-3fd7d3c193e1","version":1,"type":"text","properties":{"title":[["InnoDB作为MySQL的存储引擎，数据是存放在磁盘中的，但如果每次读写数据都需要磁盘IO，效率会很低。为此，InnoDB提供了缓存(Buffer Pool)，Buffer Pool中包含了磁盘中部分数据页的映射，作为访问数据库的缓冲：当从数据库读取数据时，会首先从Buffer Pool中读取，如果Buffer Pool中没有，则从磁盘读取后放入Buffer Pool；当向数据库写入数据时，会首先写入Buffer Pool，Buffer Pool中修改的数据会定期刷新到磁盘中（这一过程称为刷脏）。"]]},"format":{"copied_from_pointer":{"id":"9e7edd41-5eb5-476f-928d-5f9fe9dfe030","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"9e7edd41-5eb5-476f-928d-5f9fe9dfe030","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9b74ddbf-0062-40bc-92cc-be0f4a93c338":{"value":{"id":"9b74ddbf-0062-40bc-92cc-be0f4a93c338","version":1,"type":"text","properties":{"title":[["Buffer Pool的使用大大提高了读写数据的效率，但是也带了新的问题：如果MySQL宕机，而此时Buffer Pool中修改的数据还没有刷新到磁盘，就会导致数据的丢失，事务的持久性无法保证。"]]},"format":{"copied_from_pointer":{"id":"ce01e87a-a9c9-4acb-9130-2ba3c8af56d9","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ce01e87a-a9c9-4acb-9130-2ba3c8af56d9","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b6421d29-2fe9-4880-9ec1-368c47446f99":{"value":{"id":"b6421d29-2fe9-4880-9ec1-368c47446f99","version":1,"type":"text","properties":{"title":[["于是，redo log被引入来解决这个问题：当数据修改时，除了修改Buffer Pool中的数据，还会在redo log记录这次操作；当事务提交时，会调用fsync接口对redo log进行刷盘。如果MySQL宕机，重启时可以读取redo log中的数据，对数据库进行恢复。"]]},"format":{"copied_from_pointer":{"id":"a3e8e970-d4b7-48b2-b993-0825db1f2bde","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"a3e8e970-d4b7-48b2-b993-0825db1f2bde","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"13eb8d7d-8e8d-43a9-bb0a-c6d299acaf4c":{"value":{"id":"13eb8d7d-8e8d-43a9-bb0a-c6d299acaf4c","version":1,"type":"text","properties":{"title":[["redo log采用的是WAL（Write-ahead logging，预写式日志），所有修改先写入日志，再更新到Buffer Pool，保证了数据不会因MySQL宕机而丢失，从而满足了持久性要求。"]]},"format":{"copied_from_pointer":{"id":"cb0a2590-40ec-4292-8d57-bf9b74be288d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cb0a2590-40ec-4292-8d57-bf9b74be288d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5f9d4acb-b295-4093-9d70-a7dd33a1fd28":{"value":{"id":"5f9d4acb-b295-4093-9d70-a7dd33a1fd28","version":1,"type":"quote","properties":{"title":[["二阶段提交：先写redo log，执行操作，操作成功后再写bin log"]]},"format":{"copied_from_pointer":{"id":"3f0f0f0e-5619-46c6-b33e-ebd2dd80b1c3","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"3f0f0f0e-5619-46c6-b33e-ebd2dd80b1c3","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"acd626ba-84dc-4af6-95a0-e247775e5507":{"value":{"id":"acd626ba-84dc-4af6-95a0-e247775e5507","version":1,"type":"header","properties":{"title":[["隔离性"]]},"format":{"copied_from_pointer":{"id":"5aa206ea-9d40-4ff7-afca-9b319d1f990f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"5aa206ea-9d40-4ff7-afca-9b319d1f990f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b5f5e1a1-fba9-4fcb-9e5a-c2993b06a84e":{"value":{"id":"b5f5e1a1-fba9-4fcb-9e5a-c2993b06a84e","version":1,"type":"text","properties":{"title":[["隔离性要求事务之间互相隔离，不会干扰对方操作。"]]},"format":{"copied_from_pointer":{"id":"ae4ebb13-b268-4b87-946f-a21af6140637","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ae4ebb13-b268-4b87-946f-a21af6140637","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b1fe6ae1-d6cb-4b65-9c7d-ade714a13bcd":{"value":{"id":"b1fe6ae1-d6cb-4b65-9c7d-ade714a13bcd","version":1,"type":"sub_header","properties":{"title":[["隔离不足出现的问题"]]},"format":{"copied_from_pointer":{"id":"55d6fe8d-57dc-4d30-a91c-ba2f1665fccd","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"55d6fe8d-57dc-4d30-a91c-ba2f1665fccd","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"3fed38f3-4f83-479a-acb1-d03837b60d6a":{"value":{"id":"3fed38f3-4f83-479a-acb1-d03837b60d6a","version":1,"type":"bulleted_list","properties":{"title":[["脏读"]]},"format":{"copied_from_pointer":{"id":"afc85cb4-81f5-4357-a5d4-657bd2338013","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"afc85cb4-81f5-4357-a5d4-657bd2338013","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"e30e23dd-a896-4f26-ac06-f8063b55bb48":{"value":{"id":"e30e23dd-a896-4f26-ac06-f8063b55bb48","version":1,"type":"text","properties":{"title":[["A事务读取到B事务未提交的数据，一旦B事务回滚，那么读取到的数据就是脏数据"]]},"format":{"copied_from_pointer":{"id":"52ab566a-4fa4-422c-9e9a-0580bdf5ea22","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"52ab566a-4fa4-422c-9e9a-0580bdf5ea22","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"4d8119b0-5173-43af-a712-3c1ff754db76":{"value":{"id":"4d8119b0-5173-43af-a712-3c1ff754db76","version":1,"type":"bulleted_list","properties":{"title":[["不可重复读"]]},"format":{"copied_from_pointer":{"id":"39f28bfd-a9cf-44f9-9836-dba166cdfefa","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"39f28bfd-a9cf-44f9-9836-dba166cdfefa","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"17329a6c-227c-44d5-a6ce-9fb97d2c9f86":{"value":{"id":"17329a6c-227c-44d5-a6ce-9fb97d2c9f86","version":1,"type":"text","properties":{"title":[["A事务读取的数据被B事务修改，导致前后读取结果不一致"]]},"format":{"copied_from_pointer":{"id":"ae1921f5-4b69-45ae-bb9c-5fc42015ac88","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ae1921f5-4b69-45ae-bb9c-5fc42015ac88","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"cd73a46e-40d6-4a08-a012-5a0e89662d9e":{"value":{"id":"cd73a46e-40d6-4a08-a012-5a0e89662d9e","version":1,"type":"bulleted_list","properties":{"title":[["幻读"]]},"format":{"copied_from_pointer":{"id":"454f658b-3b71-413b-a8d5-dda97dff234e","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"454f658b-3b71-413b-a8d5-dda97dff234e","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b8486702-16cd-4ca1-ae2b-cd853366d833":{"value":{"id":"b8486702-16cd-4ca1-ae2b-cd853366d833","version":1,"type":"text","properties":{"title":[["A事务执行范围查询的期间，B事务在范围内写入了一些数据导致A事务再次执行范围查询的时候两次结果不一致"]]},"format":{"copied_from_pointer":{"id":"55a1f1e9-1b26-4074-961c-02f4e570ee3b","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"55a1f1e9-1b26-4074-961c-02f4e570ee3b","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"f1fc417b-b382-4444-892a-0446e63a543d":{"value":{"id":"f1fc417b-b382-4444-892a-0446e63a543d","version":1,"type":"sub_header","properties":{"title":[["事务隔离级别"]]},"format":{"copied_from_pointer":{"id":"380eee2d-9e9b-4a4e-a71b-28f16e33a7fe","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"380eee2d-9e9b-4a4e-a71b-28f16e33a7fe","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"8ffc68cb-14b6-4b9e-9952-2d54b60649f2":{"value":{"id":"8ffc68cb-14b6-4b9e-9952-2d54b60649f2","version":1,"type":"text","properties":{"title":[["SQL定义了四种隔离级别，每种隔离级别均解决了一定的问题"]]},"format":{"copied_from_pointer":{"id":"161d9db0-f64b-49d2-951a-7b9cc160963e","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"161d9db0-f64b-49d2-951a-7b9cc160963e","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7ad9eb55-7b63-4adc-868b-9e4b1f0477cf":{"value":{"id":"7ad9eb55-7b63-4adc-868b-9e4b1f0477cf","version":1,"type":"image","properties":{"size":[["48.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2aa8a3e6-4e93-4eb5-be0c-87010cf10e7b/Untitled.png"]]},"format":{"block_width":549,"block_height":368,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2aa8a3e6-4e93-4eb5-be0c-87010cf10e7b/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.6703096539162113,"copied_from_pointer":{"id":"6a0ff6b2-c295-40bd-affa-49ed1c2f67b8","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"block_preserve_scale":true},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"6a0ff6b2-c295-40bd-affa-49ed1c2f67b8","file_ids":["2aa8a3e6-4e93-4eb5-be0c-87010cf10e7b"],"created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"cf4da640-2db3-45b5-b049-2ac22f2a1491":{"value":{"id":"cf4da640-2db3-45b5-b049-2ac22f2a1491","version":1,"type":"text","properties":{"title":[["innodb的默认隔离级别是RR，在SQL标准中RR无法解决幻读问题，但是innodb通过MVCC和加锁解决了幻读问题"]]},"format":{"copied_from_pointer":{"id":"df57be1e-9fa3-4305-a59a-2b8b7a041d95","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"df57be1e-9fa3-4305-a59a-2b8b7a041d95","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"57ccb5cf-1912-402b-a46e-ad3010e6b74c":{"value":{"id":"57ccb5cf-1912-402b-a46e-ad3010e6b74c","version":1,"type":"sub_header","properties":{"title":[["RR隔离级别如何解决不可重复读和幻读"]]},"format":{"copied_from_pointer":{"id":"cf997bf4-6ed0-41a5-a460-049f7e55cc06","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cf997bf4-6ed0-41a5-a460-049f7e55cc06","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b5a1abbe-dc42-4ee8-a1a6-6c3238f9c3f7":{"value":{"id":"b5a1abbe-dc42-4ee8-a1a6-6c3238f9c3f7","version":1,"type":"text","properties":{"title":[["一句话总结："]]},"format":{"copied_from_pointer":{"id":"b06a5b77-0e7b-4c0d-9393-f4222d8535d4","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"b06a5b77-0e7b-4c0d-9393-f4222d8535d4","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"a1c9f0e8-15fa-43d2-b28d-318accc94ed9":{"value":{"id":"a1c9f0e8-15fa-43d2-b28d-318accc94ed9","version":1,"type":"bulleted_list","properties":{"title":[["当前读场景下使用加锁解决"]]},"format":{"copied_from_pointer":{"id":"9609a6fa-59dd-4f89-8319-ac46ed29e67f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"9609a6fa-59dd-4f89-8319-ac46ed29e67f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"dd9b9644-c39c-4913-899a-520098b91f50":{"value":{"id":"dd9b9644-c39c-4913-899a-520098b91f50","version":1,"type":"bulleted_list","properties":{"title":[["快照读场景下使用MVCC解决"]]},"format":{"copied_from_pointer":{"id":"47647243-14ce-4dca-bb37-b682af483460","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"47647243-14ce-4dca-bb37-b682af483460","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"f6a16406-0d99-46f5-abde-c7468c5f3abc":{"value":{"id":"f6a16406-0d99-46f5-abde-c7468c5f3abc","version":1,"type":"text","properties":{"title":[["当前读",[["b"]]]]},"format":{"copied_from_pointer":{"id":"6ca29600-734a-4e0a-8fac-2660f080103c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"6ca29600-734a-4e0a-8fac-2660f080103c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"da649356-810f-4908-b036-2140a0a5d607":{"value":{"id":"da649356-810f-4908-b036-2140a0a5d607","version":1,"type":"text","properties":{"title":[["定义：读取的数据是最新数据就是当前读"]]},"format":{"copied_from_pointer":{"id":"615f746b-9ed2-4952-ac6d-d4795ea263b4","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"615f746b-9ed2-4952-ac6d-d4795ea263b4","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"0a4929b2-ee1e-4f35-9200-1f4a67404be8":{"value":{"id":"0a4929b2-ee1e-4f35-9200-1f4a67404be8","version":1,"type":"text","properties":{"title":[["当前读的触发语句："]]},"format":{"copied_from_pointer":{"id":"15acb992-b717-4096-ade7-c444e200f201","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"15acb992-b717-4096-ade7-c444e200f201","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"bc60fb9a-0bda-418a-81fd-48d48d2a3239":{"value":{"id":"bc60fb9a-0bda-418a-81fd-48d48d2a3239","version":1,"type":"code","properties":{"title":[["select...lock in share mode  # 共享锁\n\nselect...for update # 排他锁\n\nupdate , delete , insert"]],"language":[["SQL"]]},"format":{"copied_from_pointer":{"id":"50e71c52-350f-41ce-83ad-a33ab2a3c537","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"50e71c52-350f-41ce-83ad-a33ab2a3c537","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"790dc0d2-6e21-457f-888e-75269c5600a2":{"value":{"id":"790dc0d2-6e21-457f-888e-75269c5600a2","version":1,"type":"text","properties":{"title":[["如果我们执行"],["update , delete , insert",[["c"]]],[" 这些写操作的语句，那么Mysql就会加行锁，保证涉及到的数据同一时刻只能被一个事务操作。"]]},"format":{"copied_from_pointer":{"id":"c9daff20-82e3-4b28-98a6-5162172602cf","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"c9daff20-82e3-4b28-98a6-5162172602cf","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1fb409c8-58aa-49b4-9ecd-0bdde04e5927":{"value":{"id":"1fb409c8-58aa-49b4-9ecd-0bdde04e5927","version":1,"type":"text","properties":{"title":[["如果显式的加锁，执行select语句，那么mysql就会加上next-key lock来避免产生幻读问题"]]},"format":{"copied_from_pointer":{"id":"df979b5e-42b9-41c6-98e9-d898ddb9874d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"df979b5e-42b9-41c6-98e9-d898ddb9874d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"395fc70f-6281-4d05-b02f-b2f173e779ad":{"value":{"id":"395fc70f-6281-4d05-b02f-b2f173e779ad","version":1,"type":"text","properties":{"title":[["next-key lock是行锁和间隙锁的结合体，首先使用行锁来锁住涉及到的数据，然后同时使用间隙锁锁住数据之间的间隙，不让其他事务进行插入。"]]},"format":{"copied_from_pointer":{"id":"4ce95013-8e44-4c6d-aa1d-28f7fa3b64e5","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"4ce95013-8e44-4c6d-aa1d-28f7fa3b64e5","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9f354af4-2cfd-43db-98b7-5d998e6870c3":{"value":{"id":"9f354af4-2cfd-43db-98b7-5d998e6870c3","version":1,"type":"text","properties":{"title":[["快照读",[["b"]]]]},"format":{"copied_from_pointer":{"id":"2b55aca7-802d-4a5c-a42e-1c354e535d3a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"2b55aca7-802d-4a5c-a42e-1c354e535d3a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9e645339-2a30-43e2-851e-561f7df39790":{"value":{"id":"9e645339-2a30-43e2-851e-561f7df39790","version":1,"type":"text","properties":{"title":[["快照读指的是读取到的数据是某一时刻的快照"]]},"format":{"copied_from_pointer":{"id":"4e4dfffa-7b63-4c53-af90-0e479a4eb721","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"4e4dfffa-7b63-4c53-af90-0e479a4eb721","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"f3eeeb1e-1bab-4b8a-a768-6c34c8cf6139":{"value":{"id":"f3eeeb1e-1bab-4b8a-a768-6c34c8cf6139","version":1,"type":"text","properties":{"title":[["快照读的触发语句："]]},"format":{"copied_from_pointer":{"id":"bdf96237-7b5b-4a02-8a76-cfa2d49da6b2","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"bdf96237-7b5b-4a02-8a76-cfa2d49da6b2","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5fc98598-62ca-4510-90d4-d8bc906423cc":{"value":{"id":"5fc98598-62ca-4510-90d4-d8bc906423cc","version":1,"type":"code","properties":{"title":[["简单的select操作(不包括 select ... lock in share mode, select ... for update)。"]],"language":[["SQL"]]},"format":{"copied_from_pointer":{"id":"ba1d6961-2185-488d-855e-bca727c7b2ea","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ba1d6961-2185-488d-855e-bca727c7b2ea","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"71d1fce2-0490-445d-aabf-362812cfa3b7":{"value":{"id":"71d1fce2-0490-445d-aabf-362812cfa3b7","version":1,"type":"text","properties":{"title":[["快照读解决不可重复读和幻读问题的是MVCC。"]]},"format":{"copied_from_pointer":{"id":"5068bbb5-a00d-4dc1-ab51-2f2c0968ebed","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"5068bbb5-a00d-4dc1-ab51-2f2c0968ebed","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"00696189-db7a-4fa2-9032-0bbdbbfd91ee":{"value":{"id":"00696189-db7a-4fa2-9032-0bbdbbfd91ee","version":1,"type":"text","properties":{"title":[["MVCC",[["b"]]]]},"format":{"copied_from_pointer":{"id":"388bd698-cbe0-46a1-983b-1529885e3633","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"388bd698-cbe0-46a1-983b-1529885e3633","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"c7923d72-0e69-4917-a99a-7427c83ceef9":{"value":{"id":"c7923d72-0e69-4917-a99a-7427c83ceef9","version":1,"type":"text","properties":{"title":[["多版本并发控制。"]]},"format":{"copied_from_pointer":{"id":"ab6b8261-1679-426a-bc70-fe982742779f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"ab6b8261-1679-426a-bc70-fe982742779f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"e853c645-cbc4-4fd1-abad-342f8ca5892c":{"value":{"id":"e853c645-cbc4-4fd1-abad-342f8ca5892c","version":1,"type":"text","properties":{"title":[["MVCC依赖于几个关键组件"]]},"format":{"copied_from_pointer":{"id":"8ee5a4bc-e1ca-42c9-9cb7-6981326ae56e","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"8ee5a4bc-e1ca-42c9-9cb7-6981326ae56e","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"82cf9614-8f0b-40ae-abd6-4b069e7ce81f":{"value":{"id":"82cf9614-8f0b-40ae-abd6-4b069e7ce81f","version":1,"type":"bulleted_list","properties":{"title":[["隐藏列"]]},"format":{"copied_from_pointer":{"id":"a67bd7fc-27f5-4a93-af76-16d7654243d5","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"a67bd7fc-27f5-4a93-af76-16d7654243d5","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"05dd04f6-376f-4998-b852-d73d6beb6c40":{"value":{"id":"05dd04f6-376f-4998-b852-d73d6beb6c40","version":1,"type":"text","properties":{"title":[["innodb中的隐藏列有："]]},"content":["9fc713ca-1d0e-4dd8-9487-07d3260b7991"],"format":{"copied_from_pointer":{"id":"c2fecfdb-09b7-4c44-a742-86da3ab16dea","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"c2fecfdb-09b7-4c44-a742-86da3ab16dea","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"9fc713ca-1d0e-4dd8-9487-07d3260b7991":{"value":{"id":"9fc713ca-1d0e-4dd8-9487-07d3260b7991","version":1,"type":"bulleted_list","properties":{"title":[["本行数据的事务id，指向undo log的指针，自增id"]]},"format":{"copied_from_pointer":{"id":"c2ff2941-f895-42c5-9e94-c4d3ae3486f5","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"05dd04f6-376f-4998-b852-d73d6beb6c40","parent_table":"block","alive":true,"copied_from":"c2ff2941-f895-42c5-9e94-c4d3ae3486f5","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b6febcae-34a5-4099-af6e-197f7bbf5a8d":{"value":{"id":"b6febcae-34a5-4099-af6e-197f7bbf5a8d","version":1,"type":"bulleted_list","properties":{"title":[["基于undo log的版本链"]]},"format":{"copied_from_pointer":{"id":"fd58f2bd-6d8d-4d7a-a054-da4050509123","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"fd58f2bd-6d8d-4d7a-a054-da4050509123","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"89ec8947-7fdd-4d47-bcd6-6a6517511710":{"value":{"id":"89ec8947-7fdd-4d47-bcd6-6a6517511710","version":1,"type":"text","properties":{"title":[["每个指针会指向更早版本的undo log，从而形成一条版本脸"]]},"format":{"copied_from_pointer":{"id":"5828e92e-5213-434c-85cb-235708d01e7a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"5828e92e-5213-434c-85cb-235708d01e7a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"eb199370-0e42-46bc-a285-d5f044d6bc89":{"value":{"id":"eb199370-0e42-46bc-a285-d5f044d6bc89","version":1,"type":"bulleted_list","properties":{"title":[["ReadView"]]},"format":{"copied_from_pointer":{"id":"8214d04b-18d8-409b-96b9-29015259ae9a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"8214d04b-18d8-409b-96b9-29015259ae9a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7de7146e-ece0-4699-a301-6e1af89221b8":{"value":{"id":"7de7146e-ece0-4699-a301-6e1af89221b8","version":1,"type":"text","properties":{"title":[["通过版本链和隐藏列，Mysql可以将数据恢复到指定版本。"]]},"format":{"copied_from_pointer":{"id":"6ae53ea4-6857-48a8-be1e-7fa2f72b7e9f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"6ae53ea4-6857-48a8-be1e-7fa2f72b7e9f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"6ad992da-732e-4298-a27c-dd8210cabfbe":{"value":{"id":"6ad992da-732e-4298-a27c-dd8210cabfbe","version":1,"type":"text","properties":{"title":[["所谓的ReadView就是事务某一时刻给整个事务系统（trx_sys）打快照，之后在进行读操作的时候，根据事务id和快照相比，从而判断数据是否对当前事务可见。"]]},"format":{"copied_from_pointer":{"id":"acd366b1-5d0d-4dd4-b7f3-00cc6a263eb9","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"acd366b1-5d0d-4dd4-b7f3-00cc6a263eb9","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"247fde6b-b404-4c1a-9e6d-415fbca97799":{"value":{"id":"247fde6b-b404-4c1a-9e6d-415fbca97799","version":1,"type":"text","properties":{"title":[["trx_sys中又包含了几个字段"]]},"format":{"copied_from_pointer":{"id":"22f64058-de67-42a5-859b-0dd53d73408a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"22f64058-de67-42a5-859b-0dd53d73408a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"70bd1414-b1f1-4c4a-af7b-585db02c5216":{"value":{"id":"70bd1414-b1f1-4c4a-af7b-585db02c5216","version":1,"type":"bulleted_list","properties":{"title":[["low_limit_id：表示生成ReadView时系统中应该分配给下一个事务的id。如果数据的事务id大于等于low_limit_id，则对该ReadView不可见。"]]},"format":{"copied_from_pointer":{"id":"2a4d1f07-c042-4264-bd7b-99589ebdc1f5","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"2a4d1f07-c042-4264-bd7b-99589ebdc1f5","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7a8087c5-3076-4bbb-be42-a41febad73eb":{"value":{"id":"7a8087c5-3076-4bbb-be42-a41febad73eb","version":1,"type":"bulleted_list","properties":{"title":[["up_limit_id：表示生成ReadView时当前系统中活跃的读写事务中最小的事务id。如果数据的事务id小于up_limit_id，则对该ReadView可见。"]]},"format":{"copied_from_pointer":{"id":"77536a3d-d7ee-4226-bef3-248c7d88b8a1","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"77536a3d-d7ee-4226-bef3-248c7d88b8a1","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"77a1208f-3b35-438b-ba26-79065d3ea2c8":{"value":{"id":"77a1208f-3b35-438b-ba26-79065d3ea2c8","version":1,"type":"bulleted_list","properties":{"title":[["rw_trx_ids：表示生成ReadView时当前系统中活跃的读写事务的事务id列表。如果数据的事务id在low_limit_id和up_limit_id之间，则需要判断事务id是否在rw_trx_ids中：如果在，说明生成ReadView时事务仍在活跃中，因此数据对ReadView不可见；如果不在，说明生成ReadView时事务已经提交了，因此数据对ReadView可见。"]]},"format":{"copied_from_pointer":{"id":"07f0656b-0a2e-4320-be0b-65cdb8d3d5a4","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"07f0656b-0a2e-4320-be0b-65cdb8d3d5a4","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"0b3fadac-ad26-49a6-a466-6c46d5bc5b77":{"value":{"id":"0b3fadac-ad26-49a6-a466-6c46d5bc5b77","version":1,"type":"text","properties":{"title":[["总结："]]},"format":{"copied_from_pointer":{"id":"4fe5be99-1935-4164-87a7-9dc208d2e8f7","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459785,"last_edited_time":1671179459785,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"4fe5be99-1935-4164-87a7-9dc208d2e8f7","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7baa289a-eb91-427d-9552-05746bbdc6f2":{"value":{"id":"7baa289a-eb91-427d-9552-05746bbdc6f2","version":1,"type":"text","properties":{"title":[["依靠快照和事务id，MVCC决定哪些数据可见哪些数据不可见，从而解决了不可重复读和幻读问题。MVCC和核心是undo log的版本链，通过版本链可以恢复数据。"]]},"format":{"copied_from_pointer":{"id":"d082ccc0-69c7-447e-bb37-3b21ed369b99","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"d082ccc0-69c7-447e-bb37-3b21ed369b99","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"108c2302-a987-4e8b-affd-93e1122db6c6":{"value":{"id":"108c2302-a987-4e8b-affd-93e1122db6c6","version":1,"type":"header","properties":{"title":[["一致性"]]},"format":{"copied_from_pointer":{"id":"3394c2b8-21ce-45c6-83a2-3613d97bd655","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459779,"last_edited_time":1671179459779,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"3394c2b8-21ce-45c6-83a2-3613d97bd655","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"715a02ae-0774-4146-9afd-e55493bc3e70":{"value":{"id":"715a02ae-0774-4146-9afd-e55493bc3e70","version":1,"type":"text","properties":{"title":[["一致性是指事务执行结束后，"],["数据库的完整性约束没有被破坏，事务执行的前后都是合法的数据状态。",[["b"]]],["数据库的完整性约束包括但不限于：实体完整性（如行的主键存在且唯一）、列完整性（如字段的类型、大小、长度要符合要求）、用户自定义完整性（如转账前后，两个账户余额的和应该不变）。"]]},"format":{"copied_from_pointer":{"id":"d0cfb2b3-cbfd-441e-a915-db73f8370e5d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"d0cfb2b3-cbfd-441e-a915-db73f8370e5d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"13898e3e-c31d-4a0b-9b66-c25220b5fc11":{"value":{"id":"13898e3e-c31d-4a0b-9b66-c25220b5fc11","version":1,"type":"text","properties":{"title":[["常见的例子就是，A用户给B用户转账1万元，转账前后两个账户钱的和是一致的，不会产生变化。相当于从一个合法的状态转换到了另一个合法的状态。"]]},"format":{"copied_from_pointer":{"id":"5d01dc34-170d-4e93-a93b-02f4189c5eea","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459786,"last_edited_time":1671179459786,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"5d01dc34-170d-4e93-a93b-02f4189c5eea","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"a20114a9-9793-48df-b541-b7520d745fd9":{"value":{"id":"a20114a9-9793-48df-b541-b7520d745fd9","version":1,"type":"sub_header","properties":{"title":[["如何实现一致性"]]},"format":{"copied_from_pointer":{"id":"89ec1be9-7515-4ce2-82d3-283ac4e065ff","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"89ec1be9-7515-4ce2-82d3-283ac4e065ff","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"dd06f68c-d25d-444e-948b-0cd59e745189":{"value":{"id":"dd06f68c-d25d-444e-948b-0cd59e745189","version":1,"type":"text","properties":{"title":[["一致性是事务追求的最终目标，它的实现基于原子性、隔离性、持久性的实现基础。在此基础上，要求数据库提供保障，例如不允许向整形列插入字符串值等。"]]},"format":{"copied_from_pointer":{"id":"1c5cf218-21cf-4355-9881-17fcb61eda0f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"1c5cf218-21cf-4355-9881-17fcb61eda0f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"86108962-80b9-410f-8ead-ba5a322840c8":{"value":{"id":"86108962-80b9-410f-8ead-ba5a322840c8","version":1,"type":"header","properties":{"title":[["总结"]]},"format":{"copied_from_pointer":{"id":"8cf1696e-cf2e-40a9-8647-acefd7a6c356","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"8cf1696e-cf2e-40a9-8647-acefd7a6c356","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5d268e60-c470-43d3-a5f1-beeb6d6e7c5c":{"value":{"id":"5d268e60-c470-43d3-a5f1-beeb6d6e7c5c","version":1,"type":"bulleted_list","properties":{"title":[["原子性"]]},"content":["ad764fa1-853d-4ffa-90cc-a3ed9ee261d9","b48f2bf9-f1e2-40dd-9eed-cff81c6ce6ef"],"format":{"copied_from_pointer":{"id":"bdae11a4-c85a-43da-b722-8f89528ae84a","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"bdae11a4-c85a-43da-b722-8f89528ae84a","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"ad764fa1-853d-4ffa-90cc-a3ed9ee261d9":{"value":{"id":"ad764fa1-853d-4ffa-90cc-a3ed9ee261d9","version":1,"type":"bulleted_list","properties":{"title":[["要么全部执行，要么全部不执行"]]},"format":{"copied_from_pointer":{"id":"86e1f283-46cf-4d96-a67a-b4e1955333a1","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"5d268e60-c470-43d3-a5f1-beeb6d6e7c5c","parent_table":"block","alive":true,"copied_from":"86e1f283-46cf-4d96-a67a-b4e1955333a1","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"b48f2bf9-f1e2-40dd-9eed-cff81c6ce6ef":{"value":{"id":"b48f2bf9-f1e2-40dd-9eed-cff81c6ce6ef","version":1,"type":"bulleted_list","properties":{"title":[["undo log，回滚数据"]]},"format":{"copied_from_pointer":{"id":"3b2ea6f5-cab8-4580-8d6e-51747f48d45d","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"5d268e60-c470-43d3-a5f1-beeb6d6e7c5c","parent_table":"block","alive":true,"copied_from":"3b2ea6f5-cab8-4580-8d6e-51747f48d45d","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"c563d931-9ae0-44f7-9775-57f8d1a23eb8":{"value":{"id":"c563d931-9ae0-44f7-9775-57f8d1a23eb8","version":1,"type":"bulleted_list","properties":{"title":[["持久性"]]},"content":["4a383647-618e-4fd4-a597-fe213c2a73f5","eb09f7d1-f073-49e1-9d01-124c5fb6f961"],"format":{"copied_from_pointer":{"id":"b76f5890-a09d-4e3d-80c4-8a3cea8a86b9","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459788,"last_edited_time":1671179459788,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"b76f5890-a09d-4e3d-80c4-8a3cea8a86b9","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"4a383647-618e-4fd4-a597-fe213c2a73f5":{"value":{"id":"4a383647-618e-4fd4-a597-fe213c2a73f5","version":1,"type":"bulleted_list","properties":{"title":[["事物的操作是永久的"]]},"format":{"copied_from_pointer":{"id":"acbb65f9-e6ba-450b-9c18-4755e7cfabe2","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"c563d931-9ae0-44f7-9775-57f8d1a23eb8","parent_table":"block","alive":true,"copied_from":"acbb65f9-e6ba-450b-9c18-4755e7cfabe2","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"eb09f7d1-f073-49e1-9d01-124c5fb6f961":{"value":{"id":"eb09f7d1-f073-49e1-9d01-124c5fb6f961","version":1,"type":"bulleted_list","properties":{"title":[["redo log，预写操作，保证操作不丢失及时落盘"]]},"format":{"copied_from_pointer":{"id":"05c6a7f0-f72b-4523-94b3-ab877851a370","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"c563d931-9ae0-44f7-9775-57f8d1a23eb8","parent_table":"block","alive":true,"copied_from":"05c6a7f0-f72b-4523-94b3-ab877851a370","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"3e7d2aac-a7f3-4356-b7d9-121e04e75a3c":{"value":{"id":"3e7d2aac-a7f3-4356-b7d9-121e04e75a3c","version":1,"type":"bulleted_list","properties":{"title":[["隔离性"]]},"content":["47fa4483-7dab-4008-b60e-0672b2209120","5d68dec2-8b75-4178-9806-3885f2ceb191"],"format":{"copied_from_pointer":{"id":"f4b3398d-4ada-419a-b049-9c698f6d993c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"f4b3398d-4ada-419a-b049-9c698f6d993c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"47fa4483-7dab-4008-b60e-0672b2209120":{"value":{"id":"47fa4483-7dab-4008-b60e-0672b2209120","version":1,"type":"bulleted_list","properties":{"title":[["事务之间互相隔离，不影响对方执行"]]},"format":{"copied_from_pointer":{"id":"277f7865-f131-4bdf-b4c5-567c621f8202","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459791,"last_edited_time":1671179459791,"parent_id":"3e7d2aac-a7f3-4356-b7d9-121e04e75a3c","parent_table":"block","alive":true,"copied_from":"277f7865-f131-4bdf-b4c5-567c621f8202","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"5d68dec2-8b75-4178-9806-3885f2ceb191":{"value":{"id":"5d68dec2-8b75-4178-9806-3885f2ceb191","version":1,"type":"bulleted_list","properties":{"title":[["当前读使用锁机制，快照读使用MVCC"]]},"format":{"copied_from_pointer":{"id":"e895859a-2e2b-4185-8151-dfb74723f464","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459791,"last_edited_time":1671179459791,"parent_id":"3e7d2aac-a7f3-4356-b7d9-121e04e75a3c","parent_table":"block","alive":true,"copied_from":"e895859a-2e2b-4185-8151-dfb74723f464","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"1668658c-cd7d-46e0-819c-849db7baf6e3":{"value":{"id":"1668658c-cd7d-46e0-819c-849db7baf6e3","version":1,"type":"bulleted_list","properties":{"title":[["一致性"]]},"content":["3ce3d736-a9e7-4b62-a81e-97d47e8226e3","7de96e64-8938-47cd-bf28-22176580520b"],"format":{"copied_from_pointer":{"id":"cef0409b-73cb-4ae0-b084-d6491054f675","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459789,"last_edited_time":1671179459789,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"cef0409b-73cb-4ae0-b084-d6491054f675","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"3ce3d736-a9e7-4b62-a81e-97d47e8226e3":{"value":{"id":"3ce3d736-a9e7-4b62-a81e-97d47e8226e3","version":1,"type":"bulleted_list","properties":{"title":[["事务执行前后，数据的状态是合法的，数据库的完整性约束没有被破坏"]]},"format":{"copied_from_pointer":{"id":"53e5c4ee-7cf5-4077-bdf1-d8fd46453e5c","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459791,"last_edited_time":1671179459791,"parent_id":"1668658c-cd7d-46e0-819c-849db7baf6e3","parent_table":"block","alive":true,"copied_from":"53e5c4ee-7cf5-4077-bdf1-d8fd46453e5c","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7de96e64-8938-47cd-bf28-22176580520b":{"value":{"id":"7de96e64-8938-47cd-bf28-22176580520b","version":1,"type":"bulleted_list","properties":{"title":[["要求我们实现好原子性、持久性、隔离性"]]},"format":{"copied_from_pointer":{"id":"47c4ad2a-0046-4083-a712-5882abb9a327","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"1668658c-cd7d-46e0-819c-849db7baf6e3","parent_table":"block","alive":true,"copied_from":"47c4ad2a-0046-4083-a712-5882abb9a327","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"90e5495a-b14a-4fc2-a854-69a6ccdeaa49":{"value":{"id":"90e5495a-b14a-4fc2-a854-69a6ccdeaa49","version":1,"type":"text","format":{"copied_from_pointer":{"id":"e55d9eba-6e61-4a65-abc7-dd7f99c5bd39","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459790,"last_edited_time":1671179459790,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"e55d9eba-6e61-4a65-abc7-dd7f99c5bd39","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"24a4fee4-8068-441b-86e1-4a944b371fc1":{"value":{"id":"24a4fee4-8068-441b-86e1-4a944b371fc1","version":1,"type":"header","properties":{"title":[["Ref"]]},"format":{"copied_from_pointer":{"id":"27d4f2c0-f11e-4e9e-b3a1-50b93362899f","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459778,"last_edited_time":1671179459778,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"27d4f2c0-f11e-4e9e-b3a1-50b93362899f","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"},"7ef6aa6d-75f8-4c2b-9620-6e17d52ce643":{"value":{"id":"7ef6aa6d-75f8-4c2b-9620-6e17d52ce643","version":1,"type":"text","properties":{"title":[["深入学习MySQL事务：ACID特性的实现原理 - 编程迷思 - 博客园 (cnblogs.com)",[["a","https://www.cnblogs.com/kismetv/p/10331633.html"]]]]},"format":{"copied_from_pointer":{"id":"836898d4-a78e-4970-8463-3368a5cacc78","table":"block","spaceId":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"}},"created_time":1671179459787,"last_edited_time":1671179459787,"parent_id":"0001a0d6-5549-4fc5-955f-57c356d6e87e","parent_table":"block","alive":true,"copied_from":"836898d4-a78e-4970-8463-3368a5cacc78","created_by_table":"notion_user","created_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","last_edited_by_table":"notion_user","last_edited_by_id":"83b4963a-e71e-4bac-9a62-dabfcb042aec","space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"}},"collection":{"a3ce75fe-7085-406b-a33f-74958ef7ee13":{"value":{"id":"a3ce75fe-7085-406b-a33f-74958ef7ee13","version":21,"name":[["NOBELIUM Template"]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"149b2bfe-eff9-4a8e-a509-740376958f01","color":"orange","value":"计算机网络"},{"id":"fbfb28ff-2898-4f5b-a8e9-f18499a0f3da","color":"default","value":"Go"},{"id":"a7a581b6-5d07-466e-b0c8-69b6752bf06e","color":"gray","value":"数据库"},{"id":"7352dc92-14af-4c61-a6e4-1abfed244c4c","color":"purple","value":"算法"},{"id":"a0ac81ef-d914-4f04-b0e4-780ef5b84be4","color":"pink","value":"Vim"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🎟️","format":{"copied_from_pointer":{"id":"dbf0f671-8075-49b9-b238-61e7eb9a7270","table":"collection","spaceId":"ac4cb96d-c8f8-4040-9bb2-868d9fc7f526"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"1d21f050-c8c4-41f3-9fd4-8ff7de49c962","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"dbf0f671-8075-49b9-b238-61e7eb9a7270","migrated":true,"space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"}},"space":{},"collection_view":{"876cf270-3f6b-4f1a-b6c8-5ffbd27ca40f":{"value":{"id":"876cf270-3f6b-4f1a-b6c8-5ffbd27ca40f","version":32,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":416,"visible":true,"property":"title"},{"width":186,"visible":true,"property":"d]hq"},{"width":211,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":222,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"},{"width":200,"visible":true,"property":"gY~W"},{"width":200,"visible":true,"property":"pzWp"},{"visible":true,"property":"B;[p"}]},"parent_id":"1d21f050-c8c4-41f3-9fd4-8ff7de49c962","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","38e3e030-5423-4343-b944-083b96fd8656","7dc3700b-1183-4e44-b4bb-cb500ae0b363","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","3531b347-b0c9-406a-97ec-dc1233b52619","3760aeb0-084a-4e6d-88da-54a3c0311402","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","f3c75b97-fd39-40bc-9473-2beb74d837b1","4d9edb9d-6ecd-4f3c-b41a-395987d6a714","c00f43c1-0fd5-45ca-a8af-e65a0bd6c990","9179759d-2b61-41a8-964e-23719e022b2d","19ad7e3a-2736-4d60-9516-6fcda35ed534","fe12b6af-37a2-4eab-a32f-5379fe881886","3634923c-2faf-4a31-a356-6ce9830706fb","6d9c82b0-2b20-425f-a87b-c9b14752bf9d","b57ebe77-5397-4ae8-b342-d19e3554f49c","1009ed18-593a-4ae7-8b32-7c39733138b5","d1d27099-40f0-4c1d-9c3b-a62349291ed2","f3ac9402-f3e4-4dc6-ae57-03d81bfd4e03","c1a9215b-4b3e-4d97-be31-f5d28736a065","8c80a9e1-a9d5-4b96-9a84-26df209c9537","ed91e3f2-5735-4c46-97db-aec5e6c4f597","7364073f-b7c8-436c-a471-779c7775fbf8","0f0ad844-b657-47c1-a04a-61d01ed706c1","6e55a5aa-680a-439d-add1-56498538aa64","7367ec26-da0a-441e-81b4-ae21068b94cf","48636b1e-62eb-449d-80db-68ee12d3caa8","f1c7db1e-871a-4529-9ba8-cd04f43979da","49477ffa-3ecf-49a3-a12d-62bea76192fc","1e50a8aa-3628-4b23-bd39-af65962e7061","fd0f48e9-d102-4502-9d06-94f78405f07a","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac","baa9bf33-a11f-4da5-80eb-7930448aaad1","586d7983-2a0e-47ee-b80c-2800696255da","553879bb-db6e-448d-8adc-68864d7be6cf","cf1ae05a-dc05-49ed-934b-adf97088cd5c","8cec23d1-4808-4ca8-9562-c98a44fa659c","918008b0-231b-4552-b752-e1f3dc35cbfc","24f98f49-407b-4f0c-b90b-7cb436c0063d","5625b2fb-6c82-4130-b336-0ec9a19d28ef","be5d776a-0cae-4ad0-b823-fc7c1371aca9","951d4753-cc76-4e10-9427-bc1517d34a8c","e7f7db5d-3e80-4afb-a4a8-4863c5302031","14b6937e-c536-48c7-95f8-b71b569ebc4d","ed276d45-3e91-40f4-b3f7-559061948489","0001a0d6-5549-4fc5-955f-57c356d6e87e","31a25d19-9261-43ad-b43e-a31d39f64545","7f5ff12b-b543-473c-9e05-bfba5d7dabff","69fd45e6-5797-4294-8c16-f0ba0a91ad5c","01ffb8be-f877-42b4-ba13-92ad393a7e6c","060867a6-c2c6-4a7c-a282-403e4081d6e4","bc0ea075-4478-4d00-b9d9-1ae358fda6a5","e8704a7f-e816-4458-ae8a-0f9bc9f144b5","bbb78d74-fe80-4da0-9585-a2ef20ab4d1a","e6582267-a054-41b3-80ab-fb860956d3c5","91edf54b-8f96-4f4f-a127-f0b6435a56eb","a2a7b7e4-7286-4510-8576-cc45b70de00a","baeff097-97e3-467f-ba44-32700380ec05","530ff059-bf5c-4dea-9b35-4eb5625f1e2a","ed84e22f-1785-4a57-9c8b-ac92bbe43bc6"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{"0ba1237b-49d2-4b38-9f1f-a449cd1417ff":"https://file.notion.so/f/s/6ef19ad6-d28a-4a6e-9841-0833386af85d/Untitled.png?id=0ba1237b-49d2-4b38-9f1f-a449cd1417ff\u0026table=block\u0026spaceId=e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4\u0026expirationTimestamp=1693324800000\u0026signature=2zoQrGzc5HIhGXUuN1ZKQ3Svwgac7NVI83YRnglZQeE","d47aae2a-0c56-448e-a3fc-1b227320c939":"https://file.notion.so/f/s/973a0d0a-5de9-446e-822d-af04d7cee855/Untitled.png?id=d47aae2a-0c56-448e-a3fc-1b227320c939\u0026table=block\u0026spaceId=e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4\u0026expirationTimestamp=1693324800000\u0026signature=j8UgzY5lQ3_Z4bPdYvb4ASDFUG23m6ONgEOakFSUdAY","98ea60f8-427f-4284-9f5a-4d946099ffa5":"https://file.notion.so/f/s/dac21077-644b-4a99-9fab-29ef336a31ba/Untitled.png?id=98ea60f8-427f-4284-9f5a-4d946099ffa5\u0026table=block\u0026spaceId=e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4\u0026expirationTimestamp=1693324800000\u0026signature=6zZ3eFMImGKjT9i93rrLQvBeCzhREObAQFJSOmz8Eec","7ad9eb55-7b63-4adc-868b-9e4b1f0477cf":"https://file.notion.so/f/s/2aa8a3e6-4e93-4eb5-be0c-87010cf10e7b/Untitled.png?id=7ad9eb55-7b63-4adc-868b-9e4b1f0477cf\u0026table=block\u0026spaceId=e7bb21a8-53c5-4141-a2a6-9c3a436ecfe4\u0026expirationTimestamp=1693324800000\u0026signature=HaEP5x63TgaZqxPHJisFcsm6Cb2yc-PjmCyz4shWLSk"}},"emailHash":"c8089598dc27a7944c95a8ed30867b78"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"acid"},"buildId":"6EAXhntIy7bGpb96a_Em-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>